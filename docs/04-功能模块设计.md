# 四、功能模块设计

## 4.1 模块架构图

```
┌────────────────────────────────────────────────────────────────────┐
│                         营养不良筛查与健康管理小程序                    │
├────────────────────────────────────────────────────────────────────┤
│                                                                    │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐             │
│  │ 用户身份管理  │  │ 健康筛查分析  │  │  健康管理    │             │
│  │   模块       │  │    模块      │  │    模块      │             │
│  └──────────────┘  └──────────────┘  └──────────────┘             │
│                                                                    │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐             │
│  │  健康商城    │  │  社区互动    │  │  积分激励    │             │
│  │    模块      │  │    模块      │  │    模块      │             │
│  └──────────────┘  └──────────────┘  └──────────────┘             │
│                                                                    │
│  ┌──────────────┐                                                  │
│  │  远程医疗    │                                                  │
│  │    模块      │                                                  │
│  └──────────────┘                                                  │
│                                                                    │
└────────────────────────────────────────────────────────────────────┘
```

## 4.2 模块详细设计

### 模块1：用户与身份管理模块

| 功能点 | 描述 |
|-------|------|
| 用户注册/登录 | 微信授权登录 |
| 用户资料管理 | 基本信息、健康信息、隐私设置 |
| 会员系统 | 购买月卡/年卡/终身卡，会员权益控制 |
| 权限管理 | 用户身份认证与权限控制 |

**作用**：建立用户身份体系，为健康数据、支付行为、会员权益等提供基础性支撑。

---

### 模块2：健康筛查与大模型分析模块

| 功能点 | 描述 |
|-------|------|
| 硬件检测数据接入 | 体温、心率、血压等 |
| 风险监测 | 体征风险、营养风险评估 |
| 面部识别分析 | 健康状态AI分析 |
| 膳食分析 | 食物识别 + 营养分解 |
| 分类算法处理 | 风控模型、标签模型 |
| LLM生成建议 | 个性化健康方案生成 |

**数据流程**：

| 输入 | 处理 | 输出 |
|-----|------|-----|
| 用户检测数据（体温、心率、血压等） | 数据格式转换、结构化处理 | 健康风险评估报告 |
| 面部照片 | 分类算法风险识别与标签匹配 | 运动建议、饮食建议 |
| 饮食图片 | 大模型生成健康建议 | 生活方式建议 |
| 第三方硬件数据 | — | 商品推荐列表 |
| GPS/运动数据 | — | 远程医疗咨询提示 |

---

### 模块3：健康管理模块

| 功能点 | 描述 |
|-------|------|
| 饮食记录 | 上传食物/自动识别/手动编辑 |
| 运动记录 | 跑步/跳绳/骑行/步行等多种类型 |
| GPS路线记录 | 轨迹记录、配速分析、能量计算 |
| 打卡系统 | 每日打卡、连续打卡统计 |
| 智能提醒 | 饮食提醒、运动提醒、喝水提醒 |
| 健康报告 | 趋势图表展示 |

**运动记录数据流**：

| 输入 | 处理 | 输出 |
|-----|------|-----|
| GPS路线（经纬度数据） | 路线渲染、数据清洗 | 运动路线图 |
| 运动类型选择 | 配速/距离/卡路里计算 | 运动分析图表 |
| 运动时长、配速、步频 | 异常运动识别（防作弊） | 当日打卡记录、运动币奖励 |

---

### 模块4：健康商城模块

| 功能点 | 描述 |
|-------|------|
| 商品推荐 | 基于AI建议及用户数据标签 |
| 商品浏览 | 分类浏览、详情页（营养标签、适用人群） |
| 购物车 | 商品管理、数量修改 |
| 支付模块 | 微信/支付宝/余额支付 |
| 订单管理 | 配送、退款、评价 |

**购买流程**：

| 输入 | 处理 | 输出 |
|-----|------|-----|
| 商品选择、数量 | 库存校验 | 订单确认信息 |
| 收货地址 | 支付请求流程 | 支付成功信息 |
| 支付方式 | 订单状态流转 | 物流信息展示 |

---

### 模块5：社区互动模块

| 功能点 | 描述 |
|-------|------|
| 动态发布 | 文字、图片、运动成绩、饮食照片 |
| 互动功能 | 点赞、评论、关注 |
| 好友系统 | 添加好友、私聊 |
| 互动鼓励 | "加油"按钮（参照Keep） |
| 排行榜 | 运动时长、连续天数、积分榜 |

**社区数据流**：

| 输入 | 处理 | 输出 |
|-----|------|-----|
| 用户上传文字、图片 | 内容安全审核 | 动态内容展示 |
| 动态标签 | 动态排序、推荐算法 | 评论区互动 |
| 点赞、评论、关注行为 | 用户关系链处理 | 好友动态更新提醒 |

---

### 模块6：积分激励模块

| 功能点 | 描述 |
|-------|------|
| 积分类型 | 运动币、膳食币 |
| 任务系统 | 每日任务与奖励机制 |
| 连续奖励 | 连续打卡奖励翻倍 |
| 积分商城 | 礼品兑换、抵扣券 |
| 等级体系 | LV1-LV10 |

**积分数据流**：

| 输入 | 处理 | 输出 |
|-----|------|-----|
| 健康行为记录 | 积分规则计算引擎 | 积分余额 |
| 打卡天数 | 等级提升逻辑 | 等级图标 |
| 完成任务记录 | 积分有效期管理 | 可兑换商品列表 |

---

### 模块7：远程医疗模块

| 功能点 | 描述 |
|-------|------|
| 医生列表 | 合作医院三甲医生展示 |
| 远程问诊 | 图文/语音/视频入口 |
| 坐诊时间 | 医生坐诊时间表 |
| 健康科普 | 科普文章展示 |

